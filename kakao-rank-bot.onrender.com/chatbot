from flask import Flask, request, jsonifyMore actions
app = Flask(__name__)
user_activity = {
    "í™ê¸¸ë™": 50,
    "ê¹€ì² ìˆ˜": 75,
    "ì´ì˜í¬": 32
@app.route("/chatbot", methods=["POST"])
def chatbot():
    body = request.get_json()
    utterance = body['userRequest']['utterance'].strip()
    user_name = body['userRequest']['user'].get('properties', {}).get('nickname', 'ìµëª…')
f utterance == "!ë­í‚¹":
        return jsonify(rank_response())
    elif utterance == "!ë‚´ì ìˆ˜":
        return jsonify(score_response(user_name))
    else:
        return jsonify(text_response("ëª…ë ¹ì–´: !ë­í‚¹ / !ë‚´ì ìˆ˜"))
def rank_response():
    sorted_users = sorted(user_activity.items(), key=lambda x: x[1], reverse=True)
    rank_text = "\n".join([f"{i+1}. {name} - {score}ì " for i, (name, score) in enumerate(sorted_users)])
    return text_response("ğŸ† ë­í‚¹\n\n" + rank_text)
ef score_response(name):
    score = user_activity.get(name, 0)
    return text_response(f"{name}ë‹˜ì˜ ì ìˆ˜ëŠ” {score}ì ì…ë‹ˆë‹¤.")
ef text_response(text):
    return {
        "version": "2.0",
        "template": {
            "outputs": [
                {
                    "simpleText": {
                        "text": text
                    }
                }
            ]
        }
    }
f __name__ == '__main__':
    app.run(host="0.0.0.0", port=5000)
flask
ervices:
  - type: web
    name: kakao-rank-bot
    env: python
    buildCommand: ""
    startCommand: "python app.py"
